# Telegram bot для backup по SSH

Bot создает защищённое подключение по SSH с серверами находящимися в одной локальной сети, архивирует критично важные данные для дальнейшей передаче.

# Перечень файлов

## Исходные файлы

- `main.py` - точка входа в бота.

- `./callbacks/callbacks.py` - Обработчики inline кнопок.

- `./data/data.example.json` - Пример файла с конфигурациями для подключения по SSH.

- `./data/load_data.py` - Файл с подгруженными переменными для бота.

- `./handlers/private_chat.py` - Список команд, которые отлавливает бот в чате.

- `./keyboards/inline_keyboards.py` - Inline клавиатуры.

- `./logs/logs.py` - Чтение и запись в файл текстовой информации о подключении и backup через ssh.

- `./ssh_tunnel/connecting.py` - Подключение по ssh, создание архива с дальнейшей передачей на сервер, на котором запущен бот, удаление архива с удаленного сервера.

- `./.gitignore` - Список папок и файлов, которые не должны попасть в GitHub.

- `README.md` - Руководство.

- `./requirements.txt` - Список зависимотей приложения.

- `./start.sh` - Скрипт запуска бота.

## Скрипты

- `start.sh` — Bash-скрипт, который делает следующее:
    - Создает виртуальное окружение
    - Активирует созданное виртуальное окружение
    - Устанавливает все зависимости из файла requirements.txt
    - Запускает файл main.py.

# Инсталляция

## Системные требования

1. OS Linux Ubuntu.
2. [Python](https://www.python.org/downloads/release/python-3123/) версия 3.12.3.
3. Система контроля версий [Git](https://git-scm.com/).
4. [Ngrok](https://ngrok.com/download/). Для запуска бота необходимо:
    - Скачать и установить утилиту с официального сайта
    - Зарегистрироваться на сайте
    - Получить token
    - Скопировать команду и вставить в терминал.
5. OpenSSH server для удаленного компьютера
7. [7Zip](https://www.7-zip.org/download.html) standalone console version:
    - Скачать 7Zip.
    - Разархивировать в `C:\Program files\7zip`
    - Добавить путь к 7za `C:\Program files\7zip` в Path


# Использование

1. Клонируйте репозиторий на свою машину с Ubuntu командой `git clone https://github.com/VolnovRampage/Bot-for-work.git.

2. Перейдите в папку `./Bot-for-work/data/`.

3. Создайте файл `data.json`.

4. Скопируйте все из файла `data.example.json` и вставьте в `data.json`.

5. Запустите Ngrok командой `ngrok http 2250`.

6. Скопируйте URI предоставленный Ngrok.

7. Вставьте URL в файл `data.json`.

8. Создайте bot в телеграм канале [BotFather](https://t.me/botfather/).

9. Скопируйте ссылку на вашего бота, предоставленную [BotFather](https://t.me/botfather/).

10. Вставьте ссылку в файл `data.json`.

11. Замените все остальные данные под ваши требования в данном файле. Данные необходимо вносить в блок SSH через запятую.

12. Откройте новое окно терминала и введите `sh start.sh` находясь в папке `./Bot-for-work`

# Автор

Автор: Вольнов Артур.

# Связь

Замечания и предложения можно присылать на адрес @VolnovRampage.
